# Copy to .env and fill in values. Never commit .env.
# The real .env is gitignored.

# Google AI API key — get from https://aistudio.google.com/
GOOGLE_API_KEY=your_key_here

# CORS allowed origins (comma-separated).
# In production, Railway injects the exact Vercel URL here.
# Default for local dev: Vite dev server
ALLOWED_ORIGINS=http://localhost:5173

# -- Search Intelligence -------------------------------------------------------
# HyDE query expansion: generate a hypothetical expert bio for weak queries
# and blend it with the original embedding before FAISS search.
# Enable only after verifying retrieval quality on the enriched index.
QUERY_EXPANSION_ENABLED=false

# Feedback-weighted re-ranking: boost experts with 10+ positive feedback
# interactions by up to 20% of their similarity score.
# Enable only after SELECT COUNT(*) FROM feedback confirms >= 50 rows.
FEEDBACK_LEARNING_ENABLED=false

# ── Search Intelligence Settings (Phase 11) ──────────────────────────────────
# These settings can be overridden at runtime via POST /api/admin/settings without redeploy.
# When a DB override exists, it takes precedence over these env vars.
# When neither a DB override nor an env var exists, the hardcoded default is used.

# Enable HyDE (Hypothetical Document Embedding) query expansion.
# Set to true in Railway after validating search quality improvement.
# DB-controllable: POST /api/admin/settings {"key": "QUERY_EXPANSION_ENABLED", "value": "true"}
QUERY_EXPANSION_ENABLED=false

# Enable feedback-weighted re-ranking (requires >= 10 feedback rows per expert).
# Set to true in Railway after accumulating sufficient feedback data.
# DB-controllable: POST /api/admin/settings {"key": "FEEDBACK_LEARNING_ENABLED", "value": "true"}
FEEDBACK_LEARNING_ENABLED=false

# Minimum FAISS cosine similarity score to consider a result "strong" (0.0–1.0).
# HyDE expansion is skipped when >= STRONG_RESULT_MIN candidates exceed this threshold.
# DB-controllable: POST /api/admin/settings {"key": "SIMILARITY_THRESHOLD", "value": "0.60"}
SIMILARITY_THRESHOLD=0.60

# Minimum number of strong results required before HyDE expansion is skipped (1–10).
# Lower = HyDE fires more aggressively. Default 3 means: expand if fewer than 3 strong results.
# DB-controllable: POST /api/admin/settings {"key": "STRONG_RESULT_MIN", "value": "3"}
STRONG_RESULT_MIN=3

# Maximum feedback score boost/penalty cap as a fraction (0.0–0.50).
# 0.20 = up to ±20% adjustment to FAISS similarity score. Cap prevents feedback from drowning signal.
# DB-controllable: POST /api/admin/settings {"key": "FEEDBACK_BOOST_CAP", "value": "0.20"}
FEEDBACK_BOOST_CAP=0.20
