---
phase: 33-command-center-header
plan: "02"
type: execute
wave: 2
depends_on: ["33-01"]
files_modified:
  - frontend/src/pages/MarketplacePage.tsx
  - frontend/src/components/sidebar/SearchInput.tsx
autonomous: false
requirements: [HDR-01, HDR-02, HDR-03]

must_haves:
  truths:
    - "The /marketplace route shows the glassmorphic Command Center header (not the old flat inline header)"
    - "The search input in the header controls the expert grid — typing filters results"
    - "The old sidebar SearchInput.tsx is deleted; no import of it remains in MarketplacePage.tsx"
    - "The expert grid scrolls visibly underneath the sticky glass header (depth and layering visible)"
    - "Mobile layout is unchanged (header remains hidden on small screens)"
  artifacts:
    - path: "frontend/src/pages/MarketplacePage.tsx"
      provides: "Marketplace page with Header component replacing inline header block"
      contains: "import Header"
    - path: "frontend/src/components/sidebar/FilterSidebar.tsx"
      provides: "Sidebar without SearchInput row (already the case per research — no change needed)"
  key_links:
    - from: "frontend/src/pages/MarketplacePage.tsx"
      to: "frontend/src/components/Header.tsx"
      via: "import Header + <Header /> render replacing inline <header> block"
      pattern: "import Header|<Header"
    - from: "frontend/src/components/Header.tsx"
      to: "frontend/src/store"
      via: "useHeaderSearch reads store.query + store.setQuery"
      pattern: "useHeaderSearch|useExplorerStore"
---

<objective>
Wire the Command Center Header into the marketplace route: replace the inline `<header>` block in `MarketplacePage.tsx` with `<Header />`, remove the now-dead `SearchInput` import, and delete `SearchInput.tsx`. Ends with a visual checkpoint confirming the glassmorphic header is live on the deployed site.

Purpose: Plan 01 builds the header in isolation; this plan makes it visible on the actual marketplace page. The deletion of SearchInput.tsx closes the loop — one source of truth for search input.
Output: Updated `MarketplacePage.tsx` + deleted `SearchInput.tsx` + human-verified live header.
</objective>

<execution_context>
@/Users/sebastianhamers/.claude/get-shit-done/workflows/execute-plan.md
@/Users/sebastianhamers/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/33-command-center-header/33-CONTEXT.md
@.planning/phases/33-command-center-header/33-01-SUMMARY.md
@frontend/src/pages/MarketplacePage.tsx
@frontend/src/components/sidebar/FilterSidebar.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update MarketplacePage.tsx — replace inline header with Header component, delete SearchInput.tsx</name>
  <files>frontend/src/pages/MarketplacePage.tsx, frontend/src/components/sidebar/SearchInput.tsx</files>
  <action>
**Step 1 — Read MarketplacePage.tsx** to locate the exact inline `<header>` block (per research: lines 100-114, but confirm actual line numbers first).

**Step 2 — Modify MarketplacePage.tsx:**

Add import at top of file (after existing React/library imports, before component-local imports):
```typescript
import Header from '../components/Header'
```

Remove the import line for `SearchInput` (it will be in a form like `import SearchInput from './sidebar/SearchInput'` or `import { SearchInput }` — locate and delete it).

Replace the inline `<header>` block that currently looks like:
```tsx
<header
  className="hidden md:flex items-center gap-6 px-6 py-3 border-b border-black/8 shrink-0 sticky top-0 z-10"
  style={{ background: 'oklch(98% 0.008 279 / 0.88)', backdropFilter: 'blur(14px)', WebkitBackdropFilter: 'blur(14px)' }}
>
  <img src="/logo.png" alt="Tinrate" className="h-8 w-auto shrink-0" ... />
  <div className="flex-1 max-w-lg">
    <SearchInput />
  </div>
</header>
```

with simply:
```tsx
<Header />
```

The `<Header />` component reads from the store directly (no props needed). Do not pass any props.

**Step 3 — Verify FilterSidebar.tsx** does NOT reference SearchInput (research confirmed it does not — but confirm with a quick read before assuming no change is needed).

**Step 4 — Delete SearchInput.tsx:**
Use the Bash tool to delete: `rm /Users/sebastianhamers/Documents/TCS/frontend/src/components/sidebar/SearchInput.tsx`

**Step 5 — Build check:**
Run `cd /Users/sebastianhamers/Documents/TCS/frontend && npm run build 2>&1 | tail -30`

If build fails due to a residual import of SearchInput anywhere, locate it with grep and remove the import. Common locations: `MarketplacePage.tsx` (already handled), `FilterSidebar.tsx` (check), `index.ts` barrel exports (check).

**Do NOT:**
- Modify AuroraBackground.tsx
- Modify FilterSidebar.tsx beyond removing any SearchInput reference (if it exists)
- Change mobile layout (MobileFilterSheet and mobile toolbar are untouched)
- Change the z-index structure of the page — just swap the header element
  </action>
  <verify>
1. `cd /Users/sebastianhamers/Documents/TCS/frontend && npm run build 2>&1 | tail -10` — exits 0, no errors
2. `grep -r "SearchInput" /Users/sebastianhamers/Documents/TCS/frontend/src/ 2>/dev/null` — returns no results (file deleted, all imports removed)
3. `grep "import Header" /Users/sebastianhamers/Documents/TCS/frontend/src/pages/MarketplacePage.tsx` — returns the import line
4. `ls /Users/sebastianhamers/Documents/TCS/frontend/src/components/sidebar/SearchInput.tsx 2>/dev/null` — file does not exist
  </verify>
  <done>Build passes. SearchInput.tsx deleted. MarketplacePage.tsx imports Header and renders `&lt;Header /&gt;` where the inline header block was. No remaining references to SearchInput anywhere in the src/ directory.</done>
</task>

<task type="auto">
  <name>Task 2: Commit and deploy to trigger Vercel</name>
  <files></files>
  <action>
Push to git to trigger automatic Vercel deployment.

```bash
cd /Users/sebastianhamers/Documents/TCS
git add frontend/src/hooks/useHeaderSearch.ts frontend/src/components/Header.tsx frontend/src/pages/MarketplacePage.tsx
git rm --cached frontend/src/components/sidebar/SearchInput.tsx 2>/dev/null || true
git add -A frontend/src/
git commit -m "feat(33): Command Center Header — glassmorphic search, animated placeholders, spring count, Sage pulse, tinrate easter egg"
git push origin main
```

After push, wait approximately 60-90 seconds for Vercel to deploy. The deployment URL is https://tcs-three-sigma.vercel.app.
  </action>
  <verify>Run `git log --oneline -3` to confirm commit exists. Run `git status` to confirm clean working tree.</verify>
  <done>Commit created with all Phase 33 header files. Git push succeeded. Working tree clean.</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 3: Visual verification — Command Center Header live on deployed site</name>
  <files></files>
  <action>Human visually verifies the Command Center Header on the live deployment at https://tcs-three-sigma.vercel.app. All glassmorphic, animation, and easter egg features confirmed working.</action>
  <verify>Human confirms all 10 checks pass (see how-to-verify below).</verify>
  <done>User types "approved" after confirming: glassmorphic header visible, placeholder crossfades, focus scale, spring count, Sage pulse dot, "tinrate" tilt + particles easter egg, grid scrolls under glass.</done>
  <what-built>
    Full Command Center Header live on https://tcs-three-sigma.vercel.app/marketplace:
    - Glassmorphic sticky header: backdrop-blur, white/70 base, aurora radial gradient top-right
    - Logo with purple drop-shadow glow
    - Search bar (max-w-2xl, centered) with animated placeholder crossfades every ~4.5s
    - Search bar scales to 1.02 on focus
    - Expert count animates with spring physics when results change
    - Purple pulse dot left of search icon appears during active Sage queries
    - Easter egg: type "tinrate" in search bar — header tilts 3 degrees, emoji particles burst from logo, input clears
    - Grid scrolls visibly underneath the glass header
    - Mobile: header hidden (unchanged)
  </what-built>
  <how-to-verify>
    1. Open https://tcs-three-sigma.vercel.app in a desktop browser (not mobile)
    2. Confirm the header has a frosted glass appearance — NOT the old flat white/gray header
    3. Wait 4-5 seconds — confirm placeholder text in search bar fades between different phrases
    4. Click the search bar — confirm it scales slightly larger (1.02)
    5. Type any text — confirm placeholder stops rotating while text is present
    6. Clear the text — confirm placeholder rotation resumes
    7. Use the rate slider or tag filter — confirm the expert count animates smoothly to the new number
    8. Open Sage (FAB button) and send a search query — confirm a small purple pulse dot appears left of the search icon while Sage is processing
    9. Type "tinrate" exactly in the search bar — confirm: header tilts, emoji particles burst from logo corner, input is cleared
    10. Scroll the expert grid downward — confirm the header stays fixed at top and the grid scrolls underneath the glass
  </how-to-verify>
  <resume-signal>Type "approved" if all 10 checks pass, or describe any issues (which check failed + what you saw instead)</resume-signal>
</task>

</tasks>

<verification>
After human approval:
- MarketplacePage.tsx has no inline header block, no SearchInput import
- SearchInput.tsx is deleted from repository
- Header.tsx is the single source of truth for the marketplace header
- Build passes: `cd /Users/sebastianhamers/Documents/TCS/frontend && npm run build` exits 0
- All Phase 33 requirements verified live: HDR-01 (glassmorphism), HDR-02 (animated search), HDR-03 (spring count + easter egg)
</verification>

<success_criteria>
- MarketplacePage.tsx renders `<Header />` in place of the old inline header block
- SearchInput.tsx deleted, zero references remain in src/
- Vite build exits 0
- Human confirms glassmorphic header, animated placeholders, focus scale, Sage pulse, spring count, and "tinrate" easter egg all work on live site
</success_criteria>

<output>
After completion, create `.planning/phases/33-command-center-header/33-02-SUMMARY.md` following the summary template at `/Users/sebastianhamers/.claude/get-shit-done/templates/summary.md`.
</output>
