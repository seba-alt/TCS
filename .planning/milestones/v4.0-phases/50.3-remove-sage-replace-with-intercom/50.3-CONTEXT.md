# Phase 50.3: Remove Sage, Replace with Intercom - Context

**Gathered:** 2026-03-02
**Status:** Ready for planning

<domain>
## Phase Boundary

Remove the entire Sage chat/pilot system (frontend components, backend endpoints, admin pages, store slices) and replace user-facing support with an Intercom widget. FAISS-powered marketplace search remains untouched — only Sage's conversational AI layer is removed.

</domain>

<decisions>
## Implementation Decisions

### Intercom Integration
- Intercom app ID: `o9v3tocw` — also expose via `VITE_INTERCOM_APP_ID` env variable
- Default bottom-right floating launcher bubble (standard Intercom positioning)
- Show on all public pages, NOT on admin pages
- Pass user email to Intercom if available (from email gate) to link conversations to identity
- Anonymous fallback if no email captured

### Sage Backend Removal
- Full removal: delete pilot/chat endpoints, pilot_service, Sage-specific LLM logic, and DB conversation models
- Keep FAISS index and marketplace search infrastructure — only Sage's conversational layer is removed
- Shared components (ChatMessage, ChatInput, useChat): remove if Sage-only; if used elsewhere, clean out Sage-specific logic only

### Sage Frontend Removal
- Delete all Sage-specific files: SagePanel, SageFAB, SageMobileSheet, SageInput, SageMessage, useSage hook, pilotSlice store
- Clean Sage references from shared files (App.tsx, RootLayout, store/index, types, etc.)
- Remove all Sage-specific analytics events from tracking.ts

### Admin Panel Cleanup
- Remove Intelligence Dashboard page entirely
- Keep Search Lab page (useful for testing marketplace search queries)
- Remove Sage conversation stats/cards from Overview page — keep search analytics and non-Sage stats
- Clean admin sidebar navigation: remove Intelligence Dashboard link, keep Search Lab
- Remove Sage conversation data from admin export functionality

### Transition — Sage References
- Replace Sage mentions in empty states/prompts with Intercom-friendly text (e.g., "Chat with us")
- Marketplace integration points ("Ask Sage about this") → replace with general "Need help?" CTA that opens Intercom
- Header: remove Sage reference, do NOT add Intercom trigger (bubble handles it)
- Remove Sage tracking events entirely — Intercom has its own analytics

### Claude's Discretion
- Exact Intercom initialization approach (script tag vs npm package)
- Order of file removal to maintain compilability during implementation
- How to handle any edge cases in shared component dependencies

</decisions>

<specifics>
## Specific Ideas

- Intercom app ID is `o9v3tocw` — hardcode or env var, both work
- Marketplace "Ask Sage" buttons should become a general help CTA, not expert-specific
- Search Lab stays because it's useful for testing search independently of Sage

</specifics>

<deferred>
## Deferred Ideas

None — discussion stayed within phase scope

</deferred>

---

*Phase: 50.3-remove-sage-replace-with-intercom*
*Context gathered: 2026-03-02*
