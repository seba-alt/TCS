---
phase: 38-browse-ui
plan: 02
type: execute
wave: 2
depends_on: ["38-01"]
files_modified:
  - frontend/src/components/browse/HeroBanner.tsx
  - frontend/src/components/browse/SkeletonHeroBanner.tsx
  - frontend/src/pages/BrowsePage.tsx
autonomous: false
requirements: [BROWSE-01, BROWSE-04, NAV-02]

must_haves:
  truths:
    - "User lands on / and sees a hero banner auto-rotating through 3-5 featured experts with fade transitions"
    - "User sees Explore All Experts CTA button in the hero banner"
    - "User sees 4 category rows below the hero: Most Popular Experts, Trending Now, Top Rated Experts, Recently Joined — each with horizontal card scroll"
    - "User sees skeleton loading placeholders (hero skeleton + 4 skeleton rows) while data loads — no blank areas"
    - "User clicks See All on any row and arrives at /explore with that row's title as the ?q= filter"
    - "User clicks Explore All Experts and arrives at /explore with no filters (all 530 experts visible)"
    - "Browse page has spacious 48-64px gaps between category rows for a premium feel"
  artifacts:
    - path: "frontend/src/components/browse/HeroBanner.tsx"
      provides: "Auto-rotating featured expert carousel with Explore All CTA"
      min_lines: 50
    - path: "frontend/src/components/browse/SkeletonHeroBanner.tsx"
      provides: "Skeleton placeholder for hero while loading"
      min_lines: 8
    - path: "frontend/src/pages/BrowsePage.tsx"
      provides: "Full Netflix-style browse page assembling all components"
      min_lines: 60
  key_links:
    - from: "frontend/src/pages/BrowsePage.tsx"
      to: "useBrowse"
      via: "hook call on mount"
      pattern: "useBrowse\\(\\)"
    - from: "frontend/src/pages/BrowsePage.tsx"
      to: "/explore"
      via: "useNavigate for See All and Explore All"
      pattern: "navigate.*explore"
    - from: "frontend/src/pages/BrowsePage.tsx"
      to: "navigationSlice"
      via: "setNavigationSource('browse') before navigate"
      pattern: "setNavigationSource.*browse"
    - from: "frontend/src/components/browse/HeroBanner.tsx"
      to: "AnimatePresence"
      via: "motion/react for fade transitions"
      pattern: "AnimatePresence"
---

<objective>
Build the HeroBanner carousel and assemble the complete BrowsePage — the Netflix-style landing page at `/` that shows a hero with featured experts, 4 horizontal category rows (using components from Plan 01), skeleton loading, and navigation wiring to Explorer via "See All" and "Explore All Experts".

Purpose: This is the user-facing Netflix browse experience — the culmination of v3.0 Phases 36-38.
Output: Full BrowsePage replacing the stub, HeroBanner carousel, skeleton hero placeholder.
</objective>

<execution_context>
@/Users/sebastianhamers/.claude/get-shit-done/workflows/execute-plan.md
@/Users/sebastianhamers/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/38-browse-ui/38-RESEARCH.md
@.planning/phases/38-browse-ui/38-01-SUMMARY.md

# Key existing files
@frontend/src/pages/MarketplacePage.tsx
@frontend/src/store/index.ts
@frontend/src/store/navigationSlice.ts
@frontend/src/hooks/useUrlSync.ts
@frontend/src/components/AuroraBackground.tsx
@frontend/src/index.css

# Plan 01 outputs (read to understand component APIs)
@frontend/src/hooks/useBrowse.ts
@frontend/src/components/browse/BrowseCard.tsx
@frontend/src/components/browse/BrowseRow.tsx
@frontend/src/components/browse/SkeletonBrowseRow.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create HeroBanner carousel and SkeletonHeroBanner</name>
  <files>
    frontend/src/components/browse/HeroBanner.tsx
    frontend/src/components/browse/SkeletonHeroBanner.tsx
  </files>
  <action>
**1. Create `frontend/src/components/browse/HeroBanner.tsx`:**

Import `AnimatePresence, motion` from `motion/react`, `useState, useEffect, useCallback` from `react`, `useNavigate` from `react-router-dom`, `useExplorerStore` from store.

Export `HeroBanner` accepting `{ featured: BrowseCardType[], onExploreAll: () => void }` (import BrowseCard type from useBrowse).

State: `index` (number, init 0), `paused` (boolean, init false).

Auto-rotation: `useEffect` with `setInterval` — advance `index` by `(i + 1) % featured.length` every 5000ms. Clear interval when `paused === true` or component unmounts. Dependency array: `[paused, featured.length]`.

Guard: If `featured.length === 0`, return null (should not happen but safety).

Current expert: `featured[index]`.

Render:
```
<div
  className="relative overflow-hidden rounded-2xl mx-4 md:mx-8 mb-4"
  style={{ height: 300 }}  // responsive: use Tailwind h-[180px] md:h-[300px]
  onMouseEnter={() => setPaused(true)}
  onMouseLeave={() => setPaused(false)}
>
```

Inside the container:
- `AnimatePresence mode="wait"`:
  - `motion.div` keyed by `current.username`:
    - `initial={{ opacity: 0, x: 30 }}`
    - `animate={{ opacity: 1, x: 0 }}`
    - `exit={{ opacity: 0, x: -30 }}`
    - `transition={{ duration: 0.6 }}`
    - `className="absolute inset-0"`
    - Background photo: If `current.photo_url`, render `<img src={current.photo_url} className="w-full h-full object-cover" />`. Otherwise render a gradient placeholder div (dark purple/indigo gradient).
    - Dark overlay for readability: `<div className="absolute inset-0 bg-gradient-to-r from-black/80 via-black/40 to-transparent" />`
    - Content overlay (positioned bottom-left): `<div className="absolute bottom-8 left-8 md:bottom-12 md:left-12 z-10">`
      - Name: `<h2 className="text-2xl md:text-4xl font-bold text-white mb-1">{current.first_name} {current.last_name}</h2>`
      - Job title: `<p className="text-sm md:text-base text-gray-300 mb-1">{current.job_title}</p>`
      - Company: `<p className="text-xs md:text-sm text-gray-400">{current.company}</p>`

- "Explore All Experts" CTA button (outside AnimatePresence, always visible):
  `<button onClick={onExploreAll} className="absolute bottom-8 right-8 md:bottom-12 md:right-12 z-10 px-6 py-3 bg-purple-600 hover:bg-purple-500 text-white font-semibold rounded-xl transition-colors shadow-lg shadow-purple-600/30">Explore All Experts</button>`

- Carousel dots (below content overlay): `<div className="absolute bottom-3 left-1/2 -translate-x-1/2 flex gap-2 z-10">` — map featured array, each dot is `<button className={`w-2 h-2 rounded-full transition-colors ${i === index ? 'bg-white' : 'bg-white/30'}`} onClick={() => setIndex(i)} />`.

Use responsive Tailwind: `h-[180px] md:h-[300px]` instead of inline style for height.

**2. Create `frontend/src/components/browse/SkeletonHeroBanner.tsx`:**

Export `SkeletonHeroBanner`:
```tsx
<div className="animate-pulse rounded-2xl mx-4 md:mx-8 mb-4 bg-gray-200/10 h-[180px] md:h-[300px]" />
```
Simple gradient placeholder matching hero dimensions.
  </action>
  <verify>
    <automated>cd /Users/sebastianhamers/Documents/TCS/frontend && npx tsc --noEmit 2>&1 | head -30</automated>
    <manual>Inspect HeroBanner: AnimatePresence with mode="wait", auto-rotating setInterval, pause on hover, Explore All CTA button, carousel dots, responsive height.</manual>
  </verify>
  <done>HeroBanner auto-rotates through featured experts with fade/slide transitions, pauses on hover, shows expert name/title/company over photo, includes "Explore All Experts" CTA button and carousel indicator dots. SkeletonHeroBanner provides matching-dimensions loading placeholder.</done>
</task>

<task type="auto">
  <name>Task 2: Assemble BrowsePage with hero, rows, skeletons, and navigation</name>
  <files>
    frontend/src/pages/BrowsePage.tsx
  </files>
  <action>
**Replace the entire BrowsePage.tsx stub** with the full Netflix-style browse page.

Imports:
- `useBrowse` from `../hooks/useBrowse`
- `HeroBanner` from `../components/browse/HeroBanner`
- `SkeletonHeroBanner` from `../components/browse/SkeletonHeroBanner`
- `BrowseRow` from `../components/browse/BrowseRow`
- `SkeletonBrowseRow` from `../components/browse/SkeletonBrowseRow`
- `AuroraBackground` from `../components/AuroraBackground`
- `useNavigate` from `react-router-dom`
- `useExplorerStore` from `../store`

**Row ordering (from CONTEXT.md locked decision):**
The backend returns rows ordered by category count. The frontend must reorder rows to match the user's locked decision:
1. Most Clicked (map to the "Most Clicked" row from backend, or first row if no exact match)
2. Trending (map to "Trending" row, or second row)
3. Highest Findability (map to "Highest Findability" row, or third row)
4. Recently Joined (map to "Recently Added" row from backend)

**Display label mapping** — The backend row titles may be category names like "Marketing Experts". The user wants descriptive labels: "Most Popular Experts", "Trending Now", "Top Rated Experts", "Recently Joined".

**Implementation approach:** The backend currently returns rows by category count + a "Recently Added" row. The exact mapping between backend row slugs and the user's desired display labels depends on what the backend actually returns. Use the backend `title` as-is for now — the backend row titles are already descriptive (e.g., category names). Apply the display label for the special rows if identifiable:
- If `slug === 'recently-added'`, display title as "Recently Joined"
- For other rows, use the backend `title` as-is (they are category names like "Marketing Experts")
- The "Most Popular", "Trending Now", "Top Rated" labels are aspirational — the backend groups by category, not by behavioral metrics. Use backend titles directly rather than fabricating labels that don't match the data.

**Navigation handlers:**

```typescript
const navigate = useNavigate()
const setNavigationSource = useExplorerStore(s => s.setNavigationSource)
const resetFilters = useExplorerStore(s => s.resetFilters)

const handleSeeAll = useCallback((slug: string, title: string) => {
  setNavigationSource('browse')
  navigate(`/explore?q=${encodeURIComponent(title)}`)
}, [navigate, setNavigationSource])

const handleExploreAll = useCallback(() => {
  setNavigationSource('browse')
  resetFilters()
  navigate('/explore')
}, [navigate, setNavigationSource, resetFilters])
```

**CRITICAL ordering:** `setNavigationSource('browse')` MUST be called BEFORE `navigate()` in the same event handler tick. This prevents MarketplacePage from reading stale `navigationSource === 'direct'` and calling `resetPilot()`. See research Pitfall 2.

**Page structure:**

```tsx
export default function BrowsePage() {
  const { data, loading, error } = useBrowse()
  // ... navigation handlers ...

  return (
    <AuroraBackground>
      <div className="min-h-screen">
        {/* Hero Banner */}
        {loading ? (
          <SkeletonHeroBanner />
        ) : data && data.featured.length > 0 ? (
          <HeroBanner featured={data.featured} onExploreAll={handleExploreAll} />
        ) : null}

        {/* Category Rows */}
        <div className="flex flex-col gap-12 md:gap-16 pb-16">
          {loading ? (
            // Show 4 skeleton rows while loading (matches expected row count)
            <>
              <SkeletonBrowseRow />
              <SkeletonBrowseRow />
              <SkeletonBrowseRow />
              <SkeletonBrowseRow />
            </>
          ) : error ? (
            // Error state
            <div className="text-center py-20">
              <p className="text-gray-400 text-lg">Something went wrong loading experts.</p>
              <button onClick={() => window.location.reload()} className="mt-4 text-purple-400 hover:text-purple-300 underline">Try again</button>
            </div>
          ) : data ? (
            // Render actual rows
            data.rows.map(row => (
              <BrowseRow
                key={row.slug}
                title={row.slug === 'recently-added' ? 'Recently Joined' : row.title}
                slug={row.slug}
                experts={row.experts}
                total={row.total}
                onSeeAll={handleSeeAll}
              />
            ))
          ) : null}
        </div>
      </div>
    </AuroraBackground>
  )
}
```

**Spacing:** Use `gap-12 md:gap-16` on the row container (48px / 64px) per the locked decision for spacious premium feel.

**Top padding:** Add `pt-8 md:pt-12` on the outer container for breathing room above the hero.

**Error state:** Simple centered message with reload button — per Claude's discretion area.

**No Zustand for browse data** — browse data is page-local state (useBrowse hook), not stored in Zustand. Zustand is only used for `setNavigationSource` and `resetFilters` (cross-page state).
  </action>
  <verify>
    <automated>cd /Users/sebastianhamers/Documents/TCS/frontend && npx tsc --noEmit 2>&1 | head -30</automated>
    <manual>Check BrowsePage: AuroraBackground wrapping, hero + 4 skeleton rows while loading, actual rows after load, gap-12 md:gap-16 spacing, error state, See All and Explore All navigation</manual>
  </verify>
  <done>BrowsePage at / shows hero banner with featured experts, 4+ category rows with horizontal card scroll, skeleton loading (hero + rows), and working navigation: See All goes to /explore?q={title}, Explore All goes to /explore with no filters. NavigationSource set to 'browse' before all navigations.</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 3: Visual verification of Browse page</name>
  <files>frontend/src/pages/BrowsePage.tsx</files>
  <action>
Human verifies the complete Browse page visually. No code changes — this is a verification checkpoint.

What was built: Complete Netflix-style Browse page with hero carousel, horizontal category rows, glassmorphic cards with photo/monogram fallback, skeleton loading, and See All / Explore All navigation to Explorer.

How to verify:
1. Start dev server: `cd frontend && npm run dev`
2. Open http://localhost:5173/ in browser
3. Verify: Hero banner cycles through featured experts with fade transitions (wait 5-10 seconds to see rotation)
4. Verify: Category rows display below hero with horizontal scroll, snap behavior, no visible scrollbar
5. Verify: Cards show photo (or monogram initials for experts without photos) with name + rate overlay
6. Verify: Hovering a card expands it slightly, revealing tags
7. Verify: Fade edges visible on left/right of each row
8. Verify: "See All" link in row header and "See All" card at end of row scroll
9. Verify: Click "See All" on any row — navigates to /explore?q={rowTitle}
10. Verify: Click "Explore All Experts" in hero — navigates to /explore with all experts visible
11. Verify: Skeleton loading appears briefly before data loads (throttle network to Slow 3G to observe)
12. Verify: Mobile responsive — hero shorter, rows still scroll horizontally with touch
  </action>
  <verify>
    <automated>cd /Users/sebastianhamers/Documents/TCS/frontend && npx tsc --noEmit 2>&1 | head -30</automated>
    <manual>User visually confirms all 12 verification steps above pass</manual>
  </verify>
  <done>User types "approved" confirming the Browse page meets visual and functional requirements</done>
</task>

</tasks>

<verification>
1. `cd frontend && npx tsc --noEmit` — zero type errors
2. BrowsePage.tsx is no longer a stub — renders hero + rows + skeletons
3. HeroBanner auto-rotates with AnimatePresence, includes "Explore All Experts" CTA
4. All navigation sets navigationSource='browse' BEFORE calling navigate()
5. Skeleton loading shows 4 rows + hero skeleton while data loads
6. Spacing between rows is 48-64px (gap-12 md:gap-16)
7. Error state renders a reload prompt
</verification>

<success_criteria>
- User lands on / and sees a cinematic hero + horizontal category rows (not a stub)
- Hero auto-rotates through featured experts with smooth transitions
- See All navigates to Explorer with category filter pre-applied
- Explore All Experts navigates to Explorer with all experts visible
- Skeleton loading prevents any blank areas during fetch
- Human verifies visual quality and approves
</success_criteria>

<output>
After completion, create `.planning/phases/38-browse-ui/38-02-SUMMARY.md`
</output>
