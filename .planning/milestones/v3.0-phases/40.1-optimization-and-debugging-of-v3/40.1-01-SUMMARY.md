---
phase: 40.1-optimization-and-debugging-of-v3
plan: 01
subsystem: ui
tags: [react, tailwind, motion, lazy-loading, browse]

requires:
  - phase: 40-close-v3-audit-gaps
    provides: Clean codebase with verified v3.0 features
provides:
  - Fixed-height BrowseCard with proper containing block for absolute children
  - Abstract gradient HeroBanner (no photo branch)
  - Visible FilterSidebar Domain Tags label
  - Native lazy loading on card images
affects: [40.1-02, browse-ui, visual-polish]

tech-stack:
  added: []
  patterns: [motion-initial-height-for-absolute-children, native-lazy-loading]

key-files:
  created: []
  modified:
    - frontend/src/components/browse/BrowseCard.tsx
    - frontend/src/components/browse/HeroBanner.tsx
    - frontend/src/components/sidebar/FilterSidebar.tsx

key-decisions:
  - "Use initial={{ height: 220 }} instead of minHeight to create proper containing block for absolutely-positioned img/monogram children"
  - "Remove HeroBanner photo branch entirely — portrait profile photos don't work as wide banner imagery, gradient-only is the correct design"
  - "Darken card overlay gradient to from-black/85 via-black/55 for readability over bright photos"

patterns-established:
  - "motion.div initial={{ height }} for cards with absolute-inset children: minHeight does NOT create a containing block"
  - "loading='lazy' decoding='async' on all below-fold images for deferred fetch"

requirements-completed: [BROWSE-03, PHOTO-03]

duration: 3min
completed: 2026-02-25
---

# Plan 40.1-01: Card & Banner Bug Fixes Summary

**Fixed BrowseCard height/contrast with motion initial height, replaced HeroBanner photo branch with abstract gradient, and fixed FilterSidebar label visibility**

## Performance

- **Duration:** 3 min
- **Tasks:** 3
- **Files modified:** 3

## Accomplishments
- BrowseCard renders at exactly 220px collapsed / 260px expanded with photos and monograms filling correctly via absolute positioning
- HeroBanner always shows branded purple/indigo gradient — no photo conditional, no mixed-content bug
- FilterSidebar "Domain Tags" label visible (text-gray-500 matching Hourly Rate label)
- Card images below the fold lazy-load via native `loading="lazy"` attribute
- Text overlay darkened for clear readability over any photo brightness

## Task Commits

Each task was committed atomically:

1. **Task 1: Fix BrowseCard height, text contrast, and image lazy loading** - `e87e704` (fix)
2. **Task 2: Replace HeroBanner photo logic with abstract branded gradient** - `49cff2b` (fix)
3. **Task 3: Fix FilterSidebar invisible Domain Tags label** - `b259e7c` (fix)

## Files Created/Modified
- `frontend/src/components/browse/BrowseCard.tsx` - Fixed height (initial={{ height: 220 }}), darker overlay gradient, brighter rate text, opaque tag pills, lazy loading
- `frontend/src/components/browse/HeroBanner.tsx` - Removed photo conditional branch, gradient-only background
- `frontend/src/components/sidebar/FilterSidebar.tsx` - Changed Domain Tags label from text-white/60 to text-gray-500

## Decisions Made
- Used motion.react `initial` prop instead of CSS `minHeight` — `minHeight` does not create a fixed containing block for absolutely-positioned children, but `initial={{ height }}` does
- Removed entire photo branch from HeroBanner rather than fixing the API_BASE prefix — portrait photos don't work as wide banner imagery per locked decision
- Darkened overlay gradient from 70%/40% to 85%/55% opacity for guaranteed text readability

## Deviations from Plan
None - plan executed exactly as written

## Issues Encountered
None

## User Setup Required
None - no external service configuration required.

## Next Phase Readiness
- All card/banner bugs fixed, ready for Plan 02's performance optimization and visual consistency pass
- BrowseCard is ready for React.memo wrapping (no internal state conflicts)

---
*Phase: 40.1-optimization-and-debugging-of-v3*
*Completed: 2026-02-25*
