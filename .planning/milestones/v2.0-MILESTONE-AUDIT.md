---
milestone: v2.0
audited: 2026-02-22
status: gaps_found
scores:
  requirements: 19/24
  phases: 4/6 verified
  integration: 20/24 wired
  flows: 5/7 complete
gaps:
  requirements:
    - id: "LEAD-03"
      status: "deferred"
      phase: "Phase 19"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "missing"
      evidence: "No MatchReport component, no /api/match_report endpoint anywhere in codebase. Explicitly removed from scope in 19-CONTEXT.md. REQUIREMENTS.md checkbox unchecked."
    - id: "MARKET-01"
      status: "partial"
      phase: "Phase 16"
      claimed_by_plans: ["16-01-PLAN.md", "16-02-PLAN.md"]
      completed_by_plans: ["16-03-SUMMARY.md"]
      verification_status: "passed (via SUMMARY only â€” no VERIFICATION.md)"
      evidence: "FilterChips.DEFAULT_RATE_MAX = 2000 but store rateMax default = 5000. Causes spurious 'EUR 0â€“5000' chip on every page load. RateSlider max=2000 also mismatches store max=5000."
    - id: "MARKET-02"
      status: "partial"
      phase: "Phase 17"
      claimed_by_plans: ["17-01-PLAN.md", "17-02-PLAN.md"]
      completed_by_plans: []
      verification_status: "passed"
      evidence: "loadNextPage in useExplore.ts (line 85) sends ?q= but backend /api/explore expects ?query=. Page 2+ results with active text query are returned in pure filter mode, not semantic mode â€” wrong ordering on scroll."
    - id: "MARKET-05"
      status: "partial"
      phase: "Phase 17"
      claimed_by_plans: ["17-02-PLAN.md"]
      completed_by_plans: []
      verification_status: "passed (against old code)"
      evidence: "VERIFICATION.md describes motion/react initial/animate with stagger on mount. Actual current code has NO mount animation â€” only CSS hover lift via .expert-card:hover. Hover is not 'animate into view on mount'. VERIFICATION.md is factually incorrect about current codebase state."
  integration:
    - "loadNextPage: params.set('q', query) should be params.set('query', query) â€” breaks pagination with active query (EXPL-01, MARKET-02)"
    - "FilterChips: DEFAULT_RATE_MAX=2000 vs store/useUrlSync DEFAULT_RATE_MAX=5000 â€” spurious chip on load (MARKET-01)"
    - "MobileFilterSheet: inline TOP_TAGS copy instead of importing from constants/tags.ts â€” maintenance drift risk (MARKET-01)"
  flows:
    - "Infinite scroll with active text query: page 2+ fetch sends wrong parameter, backend returns non-semantic results"
    - "Rate filter chip: spurious 'EUR 0-5000' chip appears on first load without user action"
tech_debt:
  - phase: 14-hybrid-search-backend
    items:
      - "Human verification pending: feedback boost on Railway (Feedback table likely sparse in production)"
      - "Human verification pending: FTS5 population count on Railway (cannot query Railway SQLite programmatically)"
  - phase: 15-zustand-state-and-routing
    items:
      - "Dead comment: onRehydrateStorage hook references _state?.triggerSearch() â€” action doesn't exist and isn't needed (useExplore useEffect handles initial fetch)"
  - phase: 16-marketplace-page-sidebar
    items:
      - "No VERIFICATION.md â€” phase verified via human checkpoint SUMMARY only (16-03-SUMMARY.md)"
      - "RateSlider max=2000 vs store rateMax=5000 â€” slider cannot represent rates above 2000 even though experts may have higher rates"
  - phase: 17-expert-grid-cards
    items:
      - "VERIFICATION.md describes motion/react stagger animation that no longer exists in code â€” stale documentation"
      - "tags.slice(0,2) in current code vs tags.slice(0,3) described in VERIFICATION.md (minor discrepancy)"
  - phase: 18-floating-ai-co-pilot
    items:
      - "sortBy persisted to localStorage and included in useExplore dep array but never sent to backend â€” latent stub"
  - phase: 19-extended-features
    items:
      - "No VERIFICATION.md â€” phase auto-approved via --auto flag without human browser testing"
      - "MobileFilterSheet imports duplicate inline TOP_TAGS instead of importing from constants/tags.ts"
      - "LEAD-03 (Download Match Report) explicitly deferred â€” needs backlog entry for v2.1"
---

# v2.0 Milestone Audit: Extreme Semantic Explorer

**Audited:** 2026-02-22
**Status:** gaps_found
**Milestone:** v2.0 â€” Phases 14â€“19

---

## Score Summary

| Dimension | Score | Notes |
|-----------|-------|-------|
| Requirements | 19/24 | 4 partial (bugs), 1 deferred (LEAD-03) |
| Phase verification | 4/6 | Phases 16 and 19 missing VERIFICATION.md |
| Integration wiring | 20/24 | 4 partial (2 bugs, 1 animation, 1 deferred) |
| E2E flows complete | 5/7 | 2 broken (pagination query param, rate chip) |

---

## Phase Verification Status

| Phase | VERIFICATION.md | Status | Requirements Covered |
|-------|----------------|--------|---------------------|
| 14 â€” Hybrid Search Backend | âœ“ passed | 5/5 truths | EXPL-01 through EXPL-05 |
| 15 â€” Zustand State & Routing | âœ“ passed | 5/5 truths | STATE-01, STATE-02, STATE-03 |
| 16 â€” Marketplace Page & Sidebar | âœ— missing | Human-verified via SUMMARY | MARKET-01, MARKET-06 |
| 17 â€” Expert Grid & Cards | âœ“ passed | 4/4 (stale â€” code changed after) | MARKET-02 through MARKET-05 |
| 18 â€” Floating AI Co-Pilot | âœ“ passed | 3/3 | PILOT-01, PILOT-02, PILOT-03 |
| 19 â€” Extended Features | âœ— missing | Auto-approved (--auto flag) | LEAD-01, LEAD-02, LEAD-04, ROBUST-01 to ROBUST-03 |

---

## Requirements Coverage (3-Source Cross-Reference)

| Requirement | Phase | VERIFICATION.md | SUMMARY Frontmatter | REQUIREMENTS.md | Final Status |
|-------------|-------|----------------|---------------------|-----------------|--------------|
| EXPL-01 | 14 | passed | â€” | [x] | **satisfied** (partial: page 2+ pagination bug) |
| EXPL-02 | 14 | passed | â€” | [x] | **satisfied** |
| EXPL-03 | 14 | passed | â€” | [x] | **satisfied** |
| EXPL-04 | 14 | passed | listed (14-02) | [x] | **satisfied** |
| EXPL-05 | 14 | passed | â€” | [x] | **satisfied** |
| STATE-01 | 15 | passed | listed (15-01) | [x] | **satisfied** |
| STATE-02 | 15 | passed | listed (15-01) | [x] | **satisfied** |
| STATE-03 | 15 | passed | listed (15-01) | [x] | **satisfied** |
| MARKET-01 | 16 | missing | listed (16-03) | [ ] | **partial** â€” FilterChips rate bug; no VERIFICATION.md |
| MARKET-02 | 17 | passed | â€” | [ ] | **partial** â€” pagination sends wrong param (`q` vs `query`) |
| MARKET-03 | 17 | passed | â€” | [ ] | **satisfied** |
| MARKET-04 | 17 | passed | â€” | [ ] | **satisfied** |
| MARKET-05 | 17 | passed (stale) | â€” | [ ] | **partial** â€” VERIFICATION.md describes code that was subsequently changed; no mount animation exists |
| MARKET-06 | 16 | missing | listed (16-03) | [ ] | **satisfied** (human-verified) |
| PILOT-01 | 18 | passed | â€” | [ ] | **satisfied** |
| PILOT-02 | 18 | passed | â€” | [ ] | **satisfied** |
| PILOT-03 | 18 | passed | â€” | [ ] | **satisfied** |
| LEAD-01 | 19 | missing | â€” | [ ] | **satisfied** (auto-approved: browse-without-gate confirmed) |
| LEAD-02 | 19 | missing | â€” | [ ] | **satisfied** (auto-approved: ProfileGateModal confirmed) |
| LEAD-03 | 19 | missing | â€” | [ ] | **deferred** â€” no implementation; explicitly removed in 19-CONTEXT.md |
| LEAD-04 | 19 | missing | â€” | [ ] | **satisfied** (auto-approved: localStorage bypass confirmed) |
| ROBUST-01 | 19 | missing | â€” | [ ] | **satisfied** (auto-approved: useUrlSync confirmed) |
| ROBUST-02 | 19 | missing | â€” | [ ] | **satisfied** (auto-approved: /api/suggest + SearchInput confirmed) |
| ROBUST-03 | 19 | missing | â€” | [ ] | **satisfied** (auto-approved: EmptyState enhanced confirmed) |

**Orphaned requirements:** None â€” all 24 REQ-IDs are accounted for across phases.

---

## Unsatisfied / Partial Requirements

### ðŸ”´ LEAD-03: Download Match Report (Deferred)

- **Status:** Not implemented
- **Evidence:** No `MatchReport` component, no `/api/match_report` endpoint anywhere in codebase
- **Root cause:** Explicitly removed from Phase 19 scope in `19-CONTEXT.md`
- **REQUIREMENTS.md:** Checkbox unchecked `[ ]`
- **Action:** Capture as v2.1 backlog item; update REQUIREMENTS.md to mark as deferred

### ðŸŸ¡ MARKET-01: Rate Filter Chip Bug

- **Status:** Partial â€” functional but shows spurious chip on every page load
- **Root cause:** `FilterChips.tsx:4` has `DEFAULT_RATE_MAX = 2000`, store default is `5000`
- **Fix:** Change `FilterChips.DEFAULT_RATE_MAX` to `5000`; align `RateSlider` max to `5000`; align `MobileFilterSheet` draft defaults

### ðŸŸ¡ MARKET-02: Infinite Scroll Pagination (Active Query)

- **Status:** Partial â€” page 1 works, page 2+ breaks with active text query
- **Root cause:** `useExplore.ts:85` sends `params.set('q', query)` but backend expects `query` parameter
- **Fix:** Change `params.set('q', query)` â†’ `params.set('query', query)` in `loadNextPage`

### ðŸŸ¡ MARKET-05: Card Mount Animation (Changed After Verification)

- **Status:** Partial â€” VERIFICATION.md describes `motion/react` stagger entry animation; code now uses CSS hover transition only
- **Root cause:** ExpertCard was changed post-verification to use CSS `.expert-card:hover` transitions (brand purple glow on hover)
- **Options:** (A) Accept: update MARKET-05 requirement to describe hover animation; (B) Restore: re-add `motion.div` entry animation alongside CSS hover effect

---

## Actionable Issues (Priority Order)

| Priority | Issue | File | Fix |
|----------|-------|------|-----|
| ðŸ”´ High | `loadNextPage` wrong param: `q` â†’ `query` | `frontend/src/hooks/useExplore.ts:85` | `params.set('query', query)` |
| ðŸŸ¡ Medium | `FilterChips` rate max mismatch: 2000 â†’ 5000 | `frontend/src/components/marketplace/FilterChips.tsx:4` | `DEFAULT_RATE_MAX = 5000` |
| ðŸŸ¡ Medium | `RateSlider` max mismatch: should be 5000 | `frontend/src/components/sidebar/RateSlider.tsx` | align max with store default |
| ðŸŸ¡ Medium | `MobileFilterSheet` rate draft mismatch + inline TOP_TAGS | `frontend/src/components/sidebar/MobileFilterSheet.tsx` | Align rate defaults; import TOP_TAGS from constants |
| ðŸŸ¡ Medium | MARKET-05 resolution needed | `frontend/src/components/marketplace/ExpertCard.tsx` | Accept or restore mount animation |
| âšª Low | LEAD-03 backlog capture | `.planning/REQUIREMENTS.md` | Mark as deferred, add v2.1 backlog note |
| âšª Low | Phase 16 VERIFICATION.md missing | `.planning/phases/16-marketplace-page-sidebar/` | Write post-hoc VERIFICATION.md from SUMMARY evidence |
| âšª Low | Phase 19 VERIFICATION.md missing | `.planning/phases/19-extended-features/` | Write post-hoc VERIFICATION.md from auto-approval evidence |

---

## Tech Debt by Phase

**Phase 14:**
- Feedback boost effect unverifiable (Railway Feedback table likely empty â€” cold-start guard means no boost signal)
- FTS5 population count on Railway unconfirmed programmatically

**Phase 15:**
- Dead comment in `onRehydrateStorage` referencing non-existent `triggerSearch()` action

**Phase 16:**
- No `VERIFICATION.md` â€” human-verified via checkpoint only
- `RateSlider` max 2000 prevents users from browsing experts above â‚¬2000/hr

**Phase 17:**
- `VERIFICATION.md` is stale â€” describes `motion/react` code that was subsequently replaced
- `tags.slice(0,2)` in code vs `slice(0,3)` in VERIFICATION.md

**Phase 18:**
- `sortBy` and `sortOrder` persisted and in `useExplore` dep array but never used by backend

**Phase 19:**
- No `VERIFICATION.md` â€” auto-approved via `--auto` flag; no human browser testing performed
- `MobileFilterSheet` has inline `TOP_TAGS` copy instead of importing `constants/tags.ts`

---

## Cross-Phase Integration: Complete Flows

| Flow | Status |
|------|--------|
| User browses experts freely (LEAD-01) | âœ“ Complete |
| User clicks View Full Profile â†’ email gate â†’ opens profile (LEAD-02) | âœ“ Complete |
| Returning visitor bypasses email gate (LEAD-04) | âœ“ Complete |
| Sage co-pilot applies filters â†’ grid updates (PILOT-02) | âœ“ Complete |
| URL sync roundtrip: filter â†’ URL â†’ restore on load (ROBUST-01) | âœ“ Complete |
| Infinite scroll with active text query â€” page 2+ (MARKET-02) | âœ— Broken (wrong param) |
| Rate filter chip reflects actual filter state (MARKET-01) | âœ— Broken (rate mismatch) |

---

## Verdict

**Status: `gaps_found`**

**Rationale:**
1. **LEAD-03 (Download Match Report)** â€” explicitly unchecked in REQUIREMENTS.md and deferred in CONTEXT.md; technically an unsatisfied milestone requirement
2. **Active bugs** in pagination (`loadNextPage` sends `?q=` instead of `?query=`) and rate filter chip (DEFAULT_RATE_MAX mismatch)
3. **MARKET-05 stale verification** â€” VERIFICATION.md claims motion/react animations that no longer exist in code
4. **Two phases without VERIFICATION.md** (16 and 19)

The core marketplace is functional and represents a significant feature delivery. The bugs are isolated and fixable. The recommended path is `/gsd:plan-milestone-gaps` to create a small cleanup phase addressing the high/medium priority issues before completing the milestone.

---

*Audited: 2026-02-22*
*Auditor: Claude (gsd audit-milestone orchestrator + gsd-integration-checker)*
