# Requirements Archive: v1.1 Expert Intelligence & Search Quality

**Archived:** 2026-02-21
**Status:** ALL COMPLETE — 21/21 requirements satisfied
**Milestone:** v1.1 Expert Intelligence & Search Quality

---

## Expert Tagging

- [x] **TAGS-01**: Admin can run an offline batch script that generates 3-8 domain tags for every one of the 1,558 experts using Gemini 2.5 Flash structured output — **SHIPPED** (scripts/tag_experts.py)
- [x] **TAGS-02**: Tags are stored per expert in the SQLite Expert table as a JSON text column, validated against a structured schema on every LLM response — **SHIPPED** (Expert.tags column, tagging.py)
- [x] **TAGS-03**: The FAISS ingest script reads from the Expert DB table (not experts.csv) and includes tag text in each expert's embedding input — **SHIPPED** (scripts/ingest.py rewrite)
- [x] **TAGS-04**: FAISS index is rebuilt with all 1,558 experts (up from 530 currently indexed), validated by count assertion before promotion to production — **SHIPPED** (index.ntotal assertion in ingest.py)
- [x] **TAGS-05**: When an admin adds a new expert via the admin dashboard, the system automatically generates domain tags and computes a findability score for that expert immediately — **SHIPPED** (POST /api/admin/experts with BackgroundTasks)

## Findability Scoring

- [x] **FIND-01**: System computes a 0–100 findability score per expert based on a deterministic formula: bio presence/length (40 pts), tags present (25 pts), profile URL present (15 pts), job title present (10 pts), hourly rate present (10 pts) — **SHIPPED** (compute_findability_score() in tagging.py)
- [x] **FIND-02**: Findability score is stored as a Float column on the Expert table in SQLite, added via idempotent schema migration — **SHIPPED** (Expert.findability_score, lifespan migration)
- [x] **FIND-03**: Score computation runs automatically as part of the batch tagging script after tags are written — **SHIPPED** (tag_experts.py calls compute_findability_score())

## Admin Expert Tab

- [x] **ADMIN-01**: Admin Expert tab displays First Name and Last Name separately (replacing the current Username-based display) — **SHIPPED** (ExpertsPage.tsx)
- [x] **ADMIN-02**: Admin Expert tab displays a bio preview (truncated to ~120 characters) — **SHIPPED** (ExpertsPage.tsx)
- [x] **ADMIN-03**: Admin Expert tab displays the expert's profile URL as a clickable link — **SHIPPED** (ExpertsPage.tsx)
- [x] **ADMIN-04**: Admin Expert tab displays each expert's domain tags as visual pills — **SHIPPED** (ExpertsPage.tsx)
- [x] **ADMIN-05**: Admin Expert tab displays a color-coded findability score badge per expert: red (0–39), yellow (40–69), green (70–100) — **SHIPPED** (ExpertsPage.tsx)
- [x] **ADMIN-06**: Admin Expert tab defaults to worst-first sort by findability score so lowest-quality profiles surface at the top — **SHIPPED** (findability_score.asc().nulls_first())

## Search Intelligence

- [x] **SEARCH-01**: System generates a hypothetical expert bio matching each user query (HyDE) and blends it with the raw query embedding before FAISS search — **SHIPPED** (search_intelligence.py, QUERY_EXPANSION_ENABLED)
- [x] **SEARCH-02**: HyDE expansion is controlled by a `QUERY_EXPANSION_ENABLED` environment variable flag — **SHIPPED** (env var, defaults False)
- [x] **SEARCH-03**: HyDE expansion is skipped when the original query already returns strong results above the similarity threshold — **SHIPPED** (_is_weak_query() guard)
- [x] **SEARCH-04**: System applies a soft feedback-weighted boost to retrieval results based on cumulative thumbs up/down votes per expert — **SHIPPED** (_apply_feedback_boost(), FEEDBACK_LEARNING_ENABLED)
- [x] **SEARCH-05**: Feedback re-ranking requires a minimum of 10 interactions per expert before applying any boost, capped at 20% of similarity score — **SHIPPED** (cold-start guard, ±0.20 cap)
- [x] **SEARCH-06**: Feedback re-ranking is controlled by a `FEEDBACK_LEARNING_ENABLED` environment variable flag — **SHIPPED** (env var, defaults False)
- [x] **SEARCH-07**: Admin can view a domain map endpoint showing which expert tag domains appear most frequently in downvoted results — **SHIPPED** (GET /api/admin/domain-map)

---

## Deferred to v2

- **TESTLAB-01** through **TESTLAB-03** — Admin test lab UI (partially built in admin but not in original requirements; formally deferred for deeper comparison tooling)
- **TAGMGMT-01**, **TAGMGMT-02** — Manual tag editing + per-expert FAISS re-ingest
- **ADV-01** — Multi-query RAG Fusion

---

## Outcome Notes

- 21/21 v1.1 requirements delivered in 3 phases over 1 day
- HyDE and feedback re-ranking gated by env vars (both default disabled) — ready to enable in Railway when feedback corpus is sufficient
- Admin Search Lab (bonus: not in original requirements) — shipped as admin quality tool
- Admin Intelligence Dashboard (bonus: not in original requirements) — shipped for HyDE/feedback monitoring

---
*Requirements defined: 2026-02-21*
*Archived: 2026-02-21*
