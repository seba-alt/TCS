# Plan 40.2-02 Summary: Explorer Enhancements

**Status:** Complete
**Completed:** 2026-02-25

## What was built

Three Explorer enhancements:

1. **Profile photos on ExpertCard**: Backend `ExpertCard` model now includes `photo_url` (built from `/api/photos/{username}` proxy). Frontend `Expert` type updated. ExpertCard renders a 32px circle avatar to the left of the name when photo exists — hidden entirely with no placeholder when no photo.
2. **Clear All pill styling**: Changed from text link (`text-xs text-brand-purple hover:underline`) to a rounded pill (`bg-red-50 text-red-600 rounded-full px-2.5 py-0.5`) matching existing filter chip styling with a red tint for destructive action.
3. **Save/Bookmark feature**: Full implementation with localStorage persistence:
   - Bookmark icon (lucide `Bookmark`) at right edge of each ExpertCard
   - Outline by default, fills with brand-purple when saved
   - `tcs_saved_experts` localStorage key stores array of usernames
   - `savedFilter` added to Zustand filterSlice (ephemeral, not persisted)
   - "Saved (N)" pill in FilterChips when bookmarks exist — toggles to show only bookmarked experts
   - ExpertGrid filters display by saved usernames when savedFilter is active

## Key files

| File | Change |
|------|--------|
| `app/services/explorer.py` | Added `photo_url` to ExpertCard model + `_build_card()` |
| `frontend/src/store/resultsSlice.ts` | Added `photo_url: string \| null` to Expert interface |
| `frontend/src/store/filterSlice.ts` | Added `savedFilter` boolean + `setSavedFilter` action |
| `frontend/src/store/index.ts` | Exposed `savedFilter` + `setSavedFilter` in useFilterSlice |
| `frontend/src/components/marketplace/ExpertCard.tsx` | Photo avatar, bookmark icon, getSavedSet/toggleSavedExpert helpers |
| `frontend/src/components/marketplace/FilterChips.tsx` | Saved pill toggle, Clear All pill styling, getSavedCount helper |
| `frontend/src/components/marketplace/ExpertGrid.tsx` | savedFilter-aware displayExperts via useMemo |

## Decisions

- Photo avatar is 32px (w-8 h-8) — within CONTEXT.md's 32-36px range
- Bookmark icon positioned in Zone A flex container (top right of card)
- `fill-current text-brand-purple` pattern for filled bookmark state
- Saved filter is client-side only — filters from currently loaded experts
- Clear All pill uses red-50/red-600 to visually distinguish from other chips
- `savedFilter` is NOT persisted to localStorage (ephemeral toggle in filterSlice defaults)
