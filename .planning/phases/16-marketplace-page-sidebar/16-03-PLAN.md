---
phase: 16-marketplace-page-sidebar
plan: 03
type: execute
wave: 3
depends_on: [16-02]
files_modified: []
autonomous: false
requirements: [MARKET-01, MARKET-06]

must_haves:
  truths:
    - "Desktop sidebar is visible, sticky, and collapses to an icon strip"
    - "Adjusting any sidebar control triggers a fetch and updates the expert count in FilterChips"
    - "Clearing all filters resets the sidebar controls and refetches the unfiltered pool"
    - "On mobile, the Filter toolbar button opens the bottom-sheet; Apply closes it and triggers a fetch"
  artifacts:
    - path: "frontend/src/pages/MarketplacePage.tsx"
      provides: "Full working marketplace layout"
  key_links:
    - from: "FilterChips clear-all button"
      to: "filterSlice resetFilters action"
      via: "onClick handler"
      pattern: "resetFilters"
    - from: "MobileFilterSheet Apply button"
      to: "Zustand store"
      via: "handleApply writing draft state"
      pattern: "handleApply"
---

<objective>
Human verification of the complete Phase 16 marketplace layout. Confirm all locked decisions from CONTEXT.md are working as intended in the browser.

Purpose: Catch visual or interaction issues before Phase 17 (expert grid) builds on top of this frame.
Output: User approval or documented issues.
</objective>

<execution_context>
@/Users/sebastianhamers/.claude/get-shit-done/workflows/execute-plan.md
@/Users/sebastianhamers/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/phases/16-marketplace-page-sidebar/16-02-SUMMARY.md
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Verify: Marketplace layout, sidebar interactions, and mobile bottom-sheet</name>
  <action>Run `cd frontend && npm run dev` and execute the 18 verification steps below in the browser.</action>
  <what-built>
    Full marketplace page layout with:
    - Sticky collapsible sidebar (desktop): collapses to icon strip (Search, DollarSign, Tag icons) — NOT fully hidden
    - Sidebar controls: text search (350ms debounce + Enter), rate slider (on-release), domain tag pills (top 30, with inline search)
    - Active filter chips strip above results: each chip shows label and × dismiss; "Clear all" link when filters active; "X experts found" count
    - Skeleton grid (9 animated pulse cards) shown while fetch is in-flight
    - Mobile: toolbar "Filters" button (with badge count) opens vaul bottom-sheet with half/full snap points, drag handle, staged Apply
  </what-built>
  <how-to-verify>
    Start the dev server: `cd frontend && npm run dev`
    Visit http://localhost:5173

    **Desktop checks (browser window > 768px wide):**
    1. Sidebar visible on the left — light gray background, thin right border — containing Search, Rate, Tags controls
    2. Click the collapse toggle — sidebar shrinks to narrow icon strip with 3 icons; full controls hidden
    3. Click toggle again — sidebar expands back with full controls
    4. Type in the search box — after ~350ms, "X experts found" count updates (or SkeletonGrid appears briefly)
    5. Press Enter immediately while typing — fetch fires instantly without waiting for debounce
    6. Drag the rate slider — EUR values update on screen during drag; fetch fires only when you release
    7. Click a domain tag pill — pill highlights (brand purple); chip appears in strip above results
    8. Click the same pill again — chip disappears; pill returns to unselected state
    9. Click × on a chip — that filter clears; "Clear all" disappears if it was the last filter
    10. Click "Clear all" — all chips clear; sidebar controls reset; fetch fires; count updates

    **Mobile checks (browser window < 768px, or DevTools mobile emulation):**
    11. Desktop sidebar is hidden; toolbar shows "Experts" heading + "Filters" button on the right
    12. Tap "Filters" — bottom-sheet slides up to half-height with drag handle visible at top
    13. Drag sheet upward — snaps to full height; cannot skip to closed (sequential snap)
    14. Type in the search field inside the sheet — desktop results area does NOT update (staged behavior)
    15. Toggle some tags inside the sheet — desktop results do NOT update yet
    16. Tap "Apply" — sheet closes; filter chips appear above results; fetch fires; count updates
    17. Tap backdrop or drag sheet down — sheet dismisses without applying any changes

    **Loading state:**
    18. With a slow network (DevTools Network throttle to Slow 3G), trigger a filter change — 9 skeleton cards appear in the results area while fetch is in-flight, then disappear when results arrive
  </how-to-verify>
  <resume-signal>Type "approved" if all checks pass, or describe any issues found</resume-signal>
</task>

</tasks>

<verification>
All 18 verification steps pass and user types "approved".
</verification>

<success_criteria>
User confirms sidebar collapses to icon strip, filters drive debounced fetches, chips reflect active state, clear-all resets everything, and mobile bottom-sheet uses staged Apply pattern. Phase 17 (expert grid) can be built on this frame.
</success_criteria>

<output>
After approval, create `.planning/phases/16-marketplace-page-sidebar/16-03-SUMMARY.md` following the summary template.
Update STATE.md: phase 16 complete, current focus moves to Phase 17.
Update ROADMAP.md: mark Phase 16 plans as complete.
</output>
